(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{309:(e,t,s)=>{Promise.resolve().then(s.bind(s,9760))},9760:(e,t,s)=>{"use strict";s.d(t,{default:()=>_});var n=s(2311),i=s(2847);function r(e){let{lastBlinkAt:t,isRunning:s}=e,[r,l]=(0,i.useState)(0);(0,i.useEffect)(()=>{if(t&&s){let e=setInterval(()=>{l(Number(((new Date().getTime()-t.getTime())/1e3).toFixed(2)))},100);return()=>clearInterval(e)}l(0)},[t,s]);let o=t?r.toFixed(1).padStart(6," "):"  --  ";return(0,n.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-3 border border-green-100",children:(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"마지막 깜빡임 간격"}),(0,n.jsxs)("p",{className:"text-xl font-bold text-green-700",style:{fontVariantNumeric:"tabular-nums",minWidth:"4.5em",display:"inline-block",textAlign:"left"},children:[s?o:"  --  ","초"]})]})})})}let l=(0,i.memo)(function(e){let{isRunning:t}=e,s=(0,i.useMemo)(()=>t?"모니터링 중...":"대기 중",[t]),r=(0,i.useMemo)(()=>t?"bg-green-500 animate-pulse":"bg-gray-300",[t]);return(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(r)}),(0,n.jsx)("span",{className:"text-xs text-gray-600",children:s})]})}),o=(0,i.memo)(function(e){let{isRunning:t,onStart:s,onStop:r}=e,l=(0,i.useMemo)(()=>t?"모니터링 중지":"모니터링 시작",[t]),o=(0,i.useMemo)(()=>t?"⏹️":"▶️",[t]),a=(0,i.useMemo)(()=>t?"bg-red-500 hover:bg-red-600 text-white shadow-lg shadow-red-200":"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-lg shadow-blue-200",[t]);return(0,n.jsx)("button",{className:"w-full py-3 rounded-2xl font-semibold text-base transition-all duration-300 transform active:scale-95 ".concat(a),onClick:t?r:s,children:(0,n.jsxs)("span",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)("span",{children:o}),(0,n.jsx)("span",{children:l})]})})}),a=(0,i.memo)(function(e){let{videoRef:t,isRunning:s}=e;return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"w-full h-40 object-cover rounded-2xl border-2 transition-all duration-300 flex items-center justify-center bg-gray-100 relative overflow-hidden select-none cursor-default ".concat(s?"border-blue-400 shadow-lg":"border-gray-200"),children:[s&&(0,n.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-blue-700/60 to-indigo-500/60 z-10",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-2 animate-pulse",children:[(0,n.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD35"}),(0,n.jsx)("span",{className:"text-white text-lg font-bold drop-shadow",children:"카메라 ON"})]}),(0,n.jsx)("span",{className:"text-white text-xs opacity-80",children:"눈 깜빡임을 감지 중입니다"})]}),(0,n.jsx)("video",{ref:t,className:"w-full h-40 object-cover rounded-2xl",style:{opacity:0}})]}),!s&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-3xl mb-1",children:"\uD83D\uDCF9"}),(0,n.jsx)("p",{className:"text-gray-500 text-xs",children:"카메라를 시작해주세요"})]})})]})}),h=(0,i.memo)(function(e){let{isWarningEnabled:t,onToggleWarning:s}=e,r=(0,i.useMemo)(()=>t?"bg-orange-500":"bg-gray-300",[t]),l=(0,i.useMemo)(()=>t?"translate-x-6":"translate-x-1",[t]);return(0,n.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-2xl p-3 border border-orange-100",children:(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-xs text-orange-600 font-medium",children:"소리 경고"}),(0,n.jsx)("button",{onClick:s,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(r),children:(0,n.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(l)})})]})})})}),d=(0,i.memo)(function(e){let{warningThreshold:t,onUpdateThreshold:s}=e;return(0,n.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-orange-50 to-amber-50 rounded-2xl p-3 border border-orange-100",children:[(0,n.jsx)("span",{className:"text-xs text-orange-600 font-medium",children:"경고 임계값"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("button",{onClick:()=>s(Math.max(1,t-1)),className:"w-6 h-6 rounded-full bg-orange-200 text-orange-600 text-xs font-bold hover:bg-orange-300",children:"-"}),(0,n.jsxs)("span",{className:"text-xs font-medium text-orange-700 min-w-[2rem] text-center",children:[t,"초"]}),(0,n.jsx)("button",{onClick:()=>s(t+1),className:"w-6 h-6 rounded-full bg-orange-200 text-orange-600 text-xs font-bold hover:bg-orange-300",children:"+"})]})]})}),c=(0,i.memo)(function(e){let{isWarningEnabled:t,onToggleWarning:s}=e,r=(0,i.useMemo)(()=>t?"bg-orange-500":"bg-gray-300",[t]),l=(0,i.useMemo)(()=>t?"translate-x-6":"translate-x-1",[t]);return(0,n.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-2xl p-3 border border-orange-100",children:(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-xs text-orange-600 font-medium",children:"PIP 경고"}),(0,n.jsx)("button",{onClick:s,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(r),children:(0,n.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(l)})})]})})})}),u=e=>{let{isActive:t}=e,s="#74C577",i=t?s:"#E9E9EF",r=t?"_221_3826":"_221_3815",l=t?s:"#BDBDBD";return(0,n.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("g",{filter:"url(#filter0_i".concat(r,")"),children:(0,n.jsx)("circle",{cx:"32",cy:"32",r:"32",fill:"white"})}),t?(0,n.jsxs)("g",{clipPath:"url(#clip0".concat(r,")"),children:[(0,n.jsx)("g",{filter:"url(#filter1_f".concat(r,")"),children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7144 28.0012C21.7139 27.5866 21.8638 27.1859 22.1361 26.8733C22.4085 26.5607 22.7849 26.3574 23.1957 26.3011C23.6064 26.2447 24.0237 26.3391 24.3701 26.5668C24.7166 26.7945 24.9688 27.1401 25.0801 27.5395C27.3052 34.9704 37.8321 34.9715 40.0618 27.5452C40.1244 27.328 40.2294 27.1254 40.3707 26.9489C40.512 26.7724 40.6868 26.6257 40.885 26.517C41.0833 26.4084 41.301 26.34 41.5258 26.3159C41.7505 26.2917 41.9778 26.3123 42.1946 26.3763C42.4114 26.4404 42.6134 26.5467 42.7889 26.6891C42.9645 26.8315 43.1101 27.0072 43.2175 27.2062C43.3249 27.4051 43.3918 27.6233 43.4145 27.8482C43.4372 28.0731 43.4152 28.3003 43.3498 28.5166C42.9593 29.851 42.3309 31.1039 41.4949 32.2149L42.5921 33.3121C42.7557 33.4703 42.8862 33.6595 42.976 33.8687C43.0657 34.0779 43.1129 34.3029 43.1148 34.5305C43.1166 34.7581 43.0732 34.9838 42.9869 35.1945C42.9006 35.4051 42.7732 35.5964 42.6122 35.7573C42.4511 35.9182 42.2597 36.0454 42.0489 36.1315C41.8382 36.2176 41.6125 36.2609 41.3848 36.2588C41.1572 36.2567 40.9323 36.2093 40.7232 36.1194C40.5141 36.0294 40.325 35.8987 40.1669 35.7349L39.0126 34.5806C38.4127 34.9916 37.7733 35.3419 37.1041 35.6264L37.3818 36.6618C37.4871 37.0967 37.4182 37.5556 37.1898 37.9404C36.9614 38.3252 36.5915 38.6055 36.1592 38.7213C35.727 38.837 35.2666 38.7792 34.8763 38.5601C34.4861 38.341 34.1971 37.978 34.0709 37.5486L33.7841 36.4801C32.9784 36.5635 32.1646 36.5635 31.3589 36.4801L31.0732 37.5486C30.9556 37.9878 30.6683 38.3623 30.2746 38.5897C29.8809 38.8171 29.413 38.8788 28.9738 38.7612C28.5346 38.6436 28.1601 38.3563 27.9327 37.9626C27.7053 37.5689 27.6436 37.101 27.7612 36.6618L28.0378 35.6252C27.369 35.341 26.73 34.9911 26.1304 34.5806L24.9761 35.7349C24.818 35.8987 24.6289 36.0294 24.4198 36.1194C24.2107 36.2093 23.9858 36.2567 23.7582 36.2588C23.5305 36.2609 23.3048 36.2176 23.0941 36.1315C22.8833 36.0454 22.6919 35.9182 22.5308 35.7573C22.3698 35.5964 22.2424 35.4051 22.1561 35.1945C22.0698 34.9838 22.0264 34.7581 22.0282 34.5305C22.0301 34.3029 22.0773 34.0779 22.167 33.8687C22.2568 33.6595 22.3873 33.4703 22.5509 33.3121L23.6481 32.2149C22.814 31.1057 22.1869 29.8553 21.7966 28.5235C21.7424 28.3547 21.7146 28.1785 21.7144 28.0012Z",fill:l})}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7144 28.0012C21.7139 27.5866 21.8638 27.1859 22.1361 26.8733C22.4085 26.5607 22.7849 26.3574 23.1957 26.3011C23.6064 26.2447 24.0237 26.3391 24.3701 26.5668C24.7166 26.7945 24.9688 27.1401 25.0801 27.5395C27.3052 34.9704 37.8321 34.9715 40.0618 27.5452C40.1244 27.328 40.2294 27.1254 40.3707 26.9489C40.512 26.7724 40.6868 26.6257 40.885 26.517C41.0833 26.4084 41.301 26.34 41.5258 26.3159C41.7505 26.2917 41.9778 26.3123 42.1946 26.3763C42.4114 26.4404 42.6134 26.5467 42.7889 26.6891C42.9645 26.8315 43.1101 27.0072 43.2175 27.2062C43.3249 27.4051 43.3918 27.6233 43.4145 27.8482C43.4372 28.0731 43.4152 28.3003 43.3498 28.5166C42.9593 29.851 42.3309 31.1039 41.4949 32.2149L42.5921 33.3121C42.7557 33.4703 42.8862 33.6595 42.976 33.8687C43.0657 34.0779 43.1129 34.3029 43.1148 34.5305C43.1166 34.7581 43.0732 34.9838 42.9869 35.1945C42.9006 35.4051 42.7732 35.5964 42.6122 35.7573C42.4511 35.9182 42.2597 36.0454 42.0489 36.1315C41.8382 36.2176 41.6125 36.2609 41.3848 36.2588C41.1572 36.2567 40.9323 36.2093 40.7232 36.1194C40.5141 36.0294 40.325 35.8987 40.1669 35.7349L39.0126 34.5806C38.4127 34.9916 37.7733 35.3419 37.1041 35.6264L37.3818 36.6618C37.4871 37.0967 37.4182 37.5556 37.1898 37.9404C36.9614 38.3252 36.5915 38.6055 36.1592 38.7213C35.727 38.837 35.2666 38.7792 34.8763 38.5601C34.4861 38.341 34.1971 37.978 34.0709 37.5486L33.7841 36.4801C32.9784 36.5635 32.1646 36.5635 31.3589 36.4801L31.0732 37.5486C30.9556 37.9878 30.6683 38.3623 30.2746 38.5897C29.8809 38.8171 29.413 38.8788 28.9738 38.7612C28.5346 38.6436 28.1601 38.3563 27.9327 37.9626C27.7053 37.5689 27.6436 37.101 27.7612 36.6618L28.0378 35.6252C27.369 35.341 26.73 34.9911 26.1304 34.5806L24.9761 35.7349C24.818 35.8987 24.6289 36.0294 24.4198 36.1194C24.2107 36.2093 23.9858 36.2567 23.7582 36.2588C23.5305 36.2609 23.3048 36.2176 23.0941 36.1315C22.8833 36.0454 22.6919 35.9182 22.5308 35.7573C22.3698 35.5964 22.2424 35.4051 22.1561 35.1945C22.0698 34.9838 22.0264 34.7581 22.0282 34.5305C22.0301 34.3029 22.0773 34.0779 22.167 33.8687C22.2568 33.6595 22.3873 33.4703 22.5509 33.3121L23.6481 32.2149C22.814 31.1057 22.1869 29.8553 21.7966 28.5235C21.7424 28.3547 21.7146 28.1785 21.7144 28.0012Z",fill:l})]}):(0,n.jsxs)("g",{clipPath:"url(#clip0".concat(r,")"),children:[(0,n.jsx)("g",{filter:"url(#filter2_f".concat(r,")"),children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7144 28.0012C21.7139 27.5866 21.8638 27.1859 22.1361 26.8733C22.4085 26.5607 22.7849 26.3574 23.1957 26.3011C23.6064 26.2447 24.0237 26.3391 24.3701 26.5668C24.7166 26.7945 24.9688 27.1401 25.0801 27.5395C27.3052 34.9704 37.8321 34.9715 40.0618 27.5452C40.1244 27.328 40.2294 27.1254 40.3707 26.9489C40.512 26.7724 40.6868 26.6257 40.885 26.517C41.0833 26.4084 41.301 26.34 41.5258 26.3159C41.7505 26.2917 41.9778 26.3123 42.1946 26.3763C42.4114 26.4404 42.6134 26.5467 42.7889 26.6891C42.9645 26.8315 43.1101 27.0072 43.2175 27.2062C43.3249 27.4051 43.3918 27.6233 43.4145 27.8482C43.4372 28.0731 43.4152 28.3003 43.3498 28.5166C42.9593 29.851 42.3309 31.1039 41.4949 32.2149L42.5921 33.3121C42.7557 33.4703 42.8862 33.6595 42.976 33.8687C43.0657 34.0779 43.1129 34.3029 43.1148 34.5305C43.1166 34.7581 43.0732 34.9838 42.9869 35.1945C42.9006 35.4051 42.7732 35.5964 42.6122 35.7573C42.4511 35.9182 42.2597 36.0454 42.0489 36.1315C41.8382 36.2176 41.6125 36.2609 41.3848 36.2588C41.1572 36.2567 40.9323 36.2093 40.7232 36.1194C40.5141 36.0294 40.325 35.8987 40.1669 35.7349L39.0126 34.5806C38.4127 34.9916 37.7733 35.3419 37.1041 35.6264L37.3818 36.6618C37.4871 37.0967 37.4182 37.5556 37.1898 37.9404C36.9614 38.3252 36.5915 38.6055 36.1592 38.7213C35.727 38.837 35.2666 38.7792 34.8763 38.5601C34.4861 38.341 34.1971 37.978 34.0709 37.5486L33.7841 36.4801C32.9784 36.5635 32.1646 36.5635 31.3589 36.4801L31.0732 37.5486C30.9556 37.9878 30.6683 38.3623 30.2746 38.5897C29.8809 38.8171 29.413 38.8788 28.9738 38.7612C28.5346 38.6436 28.1601 38.3563 27.9327 37.9626C27.7053 37.5689 27.6436 37.101 27.7612 36.6618L28.0378 35.6252C27.369 35.341 26.73 34.9911 26.1304 34.5806L24.9761 35.7349C24.818 35.8987 24.6289 36.0294 24.4198 36.1194C24.2107 36.2093 23.9858 36.2567 23.7582 36.2588C23.5305 36.2609 23.3048 36.2176 23.0941 36.1315C22.8833 36.0454 22.6919 35.9182 22.5308 35.7573C22.3698 35.5964 22.2424 35.4051 22.1561 35.1945C22.0698 34.9838 22.0383 34.7581 22.0641 34.5305C22.09 34.3029 22.1724 34.0833 22.3048 33.8879L23.4021 32.7906C22.566 31.6796 21.9376 30.4267 21.7471 29.0923C21.7244 28.8674 21.7464 28.6402 21.8118 28.4239C21.8772 28.2076 21.9842 28.0056 22.1266 27.8299C22.269 27.6542 22.4447 27.5085 22.6437 27.401C22.8427 27.2935 23.0609 27.2264 23.2858 27.2035C23.5107 27.1806 23.7379 27.2024 23.9542 27.2676C24.1705 27.3328 24.3725 27.4397 24.5582 27.5821C24.7439 27.7245 24.9096 27.9001 25.0421 28.099L21.7144 28.0012Z",fill:l})}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7144 28.0012C21.7139 27.5866 21.8638 27.1859 22.1361 26.8733C22.4085 26.5607 22.7849 26.3574 23.1957 26.3011C23.6064 26.2447 24.0237 26.3391 24.3701 26.5668C24.7166 26.7945 24.9688 27.1401 25.0801 27.5395C27.3052 34.9704 37.8321 34.9715 40.0618 27.5452C40.1244 27.328 40.2294 27.1254 40.3707 26.9489C40.512 26.7724 40.6868 26.6257 40.885 26.517C41.0833 26.4084 41.301 26.34 41.5258 26.3159C41.7505 26.2917 41.9778 26.3123 42.1946 26.3763C42.4114 26.4404 42.6134 26.5467 42.7889 26.6891C42.9645 26.8315 43.1101 27.0072 43.2175 27.2062C43.3249 27.4051 43.3918 27.6233 43.4145 27.8482C43.4372 28.0731 43.4152 28.3003 43.3498 28.5166C42.9593 29.851 42.3309 31.1039 41.4949 32.2149L42.5921 33.3121C42.7557 33.4703 42.8862 33.6595 42.976 33.8687C43.0657 34.0779 43.1129 34.3029 43.1148 34.5305C43.1166 34.7581 43.0732 34.9838 42.9869 35.1945C42.9006 35.4051 42.7732 35.5964 42.6122 35.7573C42.4511 35.9182 42.2597 36.0454 42.0489 36.1315C41.8382 36.2176 41.6125 36.2609 41.3848 36.2588C41.1572 36.2567 40.9323 36.2093 40.7232 36.1194C40.5141 36.0294 40.325 35.8987 40.1669 35.7349L39.0126 34.5806C38.4127 34.9916 37.7733 35.3419 37.1041 35.6264L37.3818 36.6618C37.4871 37.0967 37.4182 37.5556 37.1898 37.9404C36.9614 38.3252 36.5915 38.6055 36.1592 38.7213C35.727 38.837 35.2666 38.7792 34.8763 38.5601C34.4861 38.341 34.1971 37.978 34.0709 37.5486L33.7841 36.4801C32.9784 36.5635 32.1646 36.5635 31.3589 36.4801L31.0732 37.5486C30.9556 37.9878 30.6683 38.3623 30.2746 38.5897C29.8809 38.8171 29.413 38.8788 28.9738 38.7612C28.5346 38.6436 28.1601 38.3563 27.9327 37.9626C27.7053 37.5689 27.6436 37.101 27.7612 36.6618L28.0378 35.6252C27.369 35.341 26.73 34.9911 26.1304 34.5806L24.9761 35.7349C24.818 35.8987 24.6289 36.0294 24.4198 36.1194C24.2107 36.2093 23.9858 36.2567 23.7582 36.2588C23.5305 36.2609 23.3048 36.2176 23.0941 36.1315C22.8833 36.0454 22.6919 35.9182 22.5308 35.7573C22.3698 35.5964 22.2424 35.4051 22.1561 35.1945C22.0698 34.9838 22.0383 34.7581 22.0641 34.5305C22.09 34.3029 22.1724 34.0833 22.3048 33.8879L23.4021 32.7906C22.566 31.6796 21.9376 30.4267 21.7471 29.0923C21.7244 28.8674 21.7464 28.6402 21.8118 28.4239C21.8772 28.2076 21.9842 28.0056 22.1266 27.8299C22.269 27.6542 22.4447 27.5085 22.6437 27.401C22.8427 27.2935 23.0609 27.2264 23.2858 27.2035C23.5107 27.1806 23.7379 27.2024 23.9542 27.2676C24.1705 27.3328 24.3725 27.4397 24.5582 27.5821C24.7439 27.7245 24.9096 27.9001 25.0421 28.099L21.7144 28.0012Z",fill:l})]}),(0,n.jsx)("g",{filter:"url(#filter2_f".concat(r,")"),children:(0,n.jsx)("circle",{cx:"32.0001",cy:"32.0006",r:"24.7857",stroke:i,strokeWidth:"3"})}),(0,n.jsx)("circle",{cx:"32.0001",cy:"32.0006",r:"24.7857",stroke:i,strokeWidth:"3"}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:"filter0_i_221_3815",x:"0",y:"0",width:"64",height:"68.5714",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"4.57143"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"5.71429"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.570744 0 0 0 0 0.570744 0 0 0 0 0.570744 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_221_3815"})]}),(0,n.jsxs)("filter",{id:"filter1_f_221_3815",x:"6.91414e-05",y:"0.000557423",width:"63.9999",height:"64.0008",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"2.85714",result:"effect1_foregroundBlur_221_3815"})]}),(0,n.jsxs)("filter",{id:"filter2_f_221_3815",x:"14.8572",y:"19.428",width:"35.4233",height:"26.2494",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"3.42857",result:"effect1_foregroundBlur_221_3815"})]}),(0,n.jsx)("clipPath",{id:"clip0_221_3815",children:(0,n.jsx)("rect",{width:"36.5714",height:"36.5714",fill:"white",transform:"translate(13.7144 13.7148)"})}),(0,n.jsxs)("filter",{id:"filter0_i_221_3826",x:"0",y:"0",width:"64",height:"68.5714",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{dy:"4.57143"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"5.71429"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.570744 0 0 0 0 0.570744 0 0 0 0 0.570744 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_221_3826"})]}),(0,n.jsxs)("filter",{id:"filter1_f_221_3826",x:"14.8572",y:"19.428",width:"35.4233",height:"26.2494",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"3.42857",result:"effect1_foregroundBlur_221_3826"})]}),(0,n.jsxs)("filter",{id:"filter2_f_221_3826",x:"6.91414e-05",y:"0.000557423",width:"63.9999",height:"64.0008",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"2.85714",result:"effect1_foregroundBlur_221_3826"})]}),(0,n.jsx)("clipPath",{id:"clip0_221_3826",children:(0,n.jsx)("rect",{width:"36.5714",height:"36.5714",fill:"white",transform:"translate(13.7144 13.7148)"})})]})]})};var p=s(4782);function m(e){let{time:t,pipFlick:s}=e;return(0,n.jsx)("div",{className:"w-[240px] h-[136px] flex flex-col items-center justify-center shadow-xl border border-gray-200 p-4 select-none bg-white",children:(0,n.jsx)(u,{isActive:s})})}let x=(0,i.forwardRef)(function(e,t){let{isRunning:s,pipFlick:r,threshold:l}=e,o=(0,i.useRef)(null),a=(0,i.useRef)(null),[h,d]=(0,i.useState)(null),c="documentPictureInPicture"in window,u=e=>{e&&Object.assign(e.style,{position:"fixed",top:"-10000px",left:"-10000px",width:"320px"})},x=e=>{Array.from(document.styleSheets).forEach(t=>{try{let s=Array.from(t.cssRules).map(e=>e.cssText).join(""),n=e.createElement("style");n.textContent=s,e.head.appendChild(n)}catch(s){if(t.href){let s=e.createElement("link");s.rel="stylesheet",s.href=t.href,e.head.appendChild(s)}}})},f=(0,i.useCallback)(async()=>{var e,t;if(!c)return;let s=window.documentPictureInPicture,n=null==(e=o.current)?void 0:e.getBoundingClientRect(),i=Math.max(260,Math.round((null==n?void 0:n.width)||320)),r=Math.max(160,Math.round((null==n?void 0:n.height)||200)),l=await (null==(t=s.requestWindow)?void 0:t.call(s,{width:i,height:r,disallowReturnToOpener:!0,preferInitialWindowPlacement:!0}));a.current=l,x(l.document),l.document.body.className="bg-white",l.document.body.style.margin="0",l.document.body.style.display="grid",l.document.body.style.placeItems="center",l.document.title="Mini Panel",d(l.document),l.addEventListener("pagehide",()=>{d(null),a.current=null},{once:!0})},[c]),C=(0,i.useCallback)(()=>{var e;null==(e=a.current)||e.close()},[]);return(0,i.useImperativeHandle)(t,()=>({open:f,close:C}),[f,C]),(0,i.useEffect)(()=>{"documentPictureInPicture"in window&&(s?f().catch(()=>{}):C())},[s,f,C]),(0,i.useEffect)(()=>(u(o.current),()=>C()),[C]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:o,children:(0,n.jsx)(m,{time:l,pipFlick:r})}),h&&(0,p.createPortal)((0,n.jsx)(m,{time:l,pipFlick:r}),h.body)]})});class f{get(e){var t;return null!=(t=this.map.get(e))?t:null}set(e,t){return this.map.set(e,t),!0}delete(e){return this.map.delete(e)}constructor(){this.map=new Map}}class C{addTool(e,t){this.tools.set(e,t)}deleteTool(e){this.tools.delete(e)}getTools(){return Array.from(this.tools.keys())}setWarning(e,t){this.stopFuncs.forEach(e=>{e.stop()}),this.stopFuncs=[],this.tools.forEach(s=>{let n=s.execute(e,t);this.stopFuncs.push(n)})}endWarning(){this.stopFuncs.forEach(e=>{e.stop()}),this.stopFuncs=[]}constructor(){this.tools=new Map,this.stopFuncs=[]}}class g{startMonitoring(){this.status="ACTIVE",this.lastBlinkAt=new Date}resetEvent(){this.lastBlinkAt=new Date}recordEvent(e){if("ACTIVE"!==this.status)throw Error("not active");if(this.lastBlinkAt&&e<this.lastBlinkAt)throw Error("time back");this.lastBlinkAt=e}snapshot(){return{status:this.status,lastBlinkAt:this.lastBlinkAt,threshold:this.threshold}}setThreshold(e){this.threshold=e}stopMonitoring(){this.status="ENDED"}constructor(e,t,s){this.status=e,this.lastBlinkAt=t,this.threshold=s}}let v={WarnFactory:Symbol("WarnFactory"),Blink:{Sensor:Symbol("Blink.Sensor"),DB:Symbol("Blink.DB"),Presenter:Symbol("Blink.Presenter"),Controller:Symbol("Blink.Controller"),Warn:Symbol("Blink.Warn"),WarnTools:Symbol("Blink.WarnTools")}};class w{async execute(e){var t;let s=null!=(t=this.db.get(e.type))?t:new g("ENDED",new Date,5);if(s.startMonitoring(),s.resetEvent(),!this.db.set(e.type,s))return!1;if(this.sensor.canUse()){this.sensor.listen(e.type,this.eventCallback);let t=s.snapshot();return this.presenter.present(t),!0}return alert("카메라 사용 불가능합니다. \n[노트북, 데스크탑의 크롬, 엣지 추천]"),!1}constructor(e){this.resolve=e,this.eventCallback=e=>{let t=this.db.get("blink");if(void 0==t||void 0==t.snapshot().threshold)return;let s=t.snapshot();t.recordEvent(new Date),this.db.set("blink",t);let n=s.threshold;this.warn.setWarning({threshold:n},this.presenter.present.bind(this.presenter)),this.presenter.present({lastBlinkAt:t.snapshot().lastBlinkAt})},this.sensor=this.resolve.get(v.Blink.Sensor),this.db=this.resolve.get(v.Blink.DB),this.presenter=this.resolve.get(v.Blink.Presenter),this.warn=this.resolve.get(v.Blink.Warn)}}class k{async execute(e){let t=this.db.get(e.type);if(void 0==t||(t.stopMonitoring(),!this.db.set(e.type,t)))return!1;this.sensor.off(e.type),this.warn.endWarning();let s=t.snapshot();return this.presenter.present(s),!0}constructor(e){this.resolve=e,this.sensor=this.resolve.get(v.Blink.Sensor),this.db=this.resolve.get(v.Blink.DB),this.presenter=this.resolve.get(v.Blink.Presenter),this.warn=this.resolve.get(v.Blink.Warn)}}class b{async execute(e){var t;let s=null!=(t=this.db.get(e.type))?t:new g("ENDED",new Date,5);s.resetEvent();let n=s.snapshot();if(void 0==n)return!1;if(e.warn.canUse()){this.warnTools.addTool(e.toolType,e.warn);let t=n.threshold;this.warn.setWarning({threshold:t},this.presenter.present.bind(this.presenter)),n.warnTools=this.warnTools.getTools(),this.presenter.present(n)}return!0}constructor(e){this.resolve=e,this.db=this.resolve.get(v.Blink.DB),this.presenter=this.resolve.get(v.Blink.Presenter),this.warnTools=this.resolve.get(v.Blink.Warn),this.warn=this.resolve.get(v.Blink.Warn)}}class y{async execute(e){var t;let s=null!=(t=this.db.get(e.type))?t:new g("ENDED",new Date,5);if(s.resetEvent(),s.setThreshold(e.threshold),!this.db.set(e.type,s))return!1;this.warn.setWarning({threshold:e.threshold},this.presenter.present.bind(this.presenter));let n=s.snapshot();return"ACTIVE"===n.status&&this.sensor.listen(e.type,this.eventCallback),this.presenter.present(n),!0}constructor(e){this.resolve=e,this.eventCallback=e=>{let t=this.db.get("blink");if(void 0==t||void 0==t.snapshot().threshold)return;let s=t.snapshot();t.recordEvent(new Date),this.db.set("blink",t);let n=s.threshold;this.warn.setWarning({threshold:n},this.presenter.present.bind(this.presenter)),this.presenter.present({lastBlinkAt:t.snapshot().lastBlinkAt})},this.sensor=this.resolve.get(v.Blink.Sensor),this.db=this.resolve.get(v.Blink.DB),this.presenter=this.resolve.get(v.Blink.Presenter),this.warn=this.resolve.get(v.Blink.Warn)}}class j{async execute(e){var t;let s=null!=(t=this.db.get(e.type))?t:new g("ENDED",new Date,5);s.resetEvent();let n=s.snapshot();if(void 0==n)return!1;this.warnTools.deleteTool(e.toolType);let i=n.threshold;return this.warn.setWarning({threshold:i},this.presenter.present.bind(this.presenter)),n.warnTools=this.warnTools.getTools(),this.presenter.present(n),!0}constructor(e){this.resolve=e,this.db=this.resolve.get(v.Blink.DB),this.presenter=this.resolve.get(v.Blink.Presenter),this.warnTools=this.resolve.get(v.Blink.Warn),this.warn=this.resolve.get(v.Blink.Warn)}}class B{canUse(){return"documentPictureInPicture"in window||(alert("PIP를 지원하지 않는 브라우저입니다.\n[크롬, 엣지 추천]"),!1)}execute(e,t){let s="number"==typeof e.threshold&&e.threshold<1e3?1e3*e.threshold:e.threshold,n=null,i=setTimeout(()=>{this.flick=!this.flick,t({pipFlick:this.flick}),n=setInterval(()=>{"function"==typeof t&&(this.flick=!this.flick,t({pipFlick:this.flick}))},800)},s);return{stop:()=>{clearTimeout(i),this.flick=!1,t({pipFlick:this.flick}),n&&clearInterval(n)}}}constructor(e){this.option=e,this.flick=!1}}class T{canUse(){return!!window.AudioContext||!!window.webkitAudioContext||(alert("소리 기능을 활용할 수 없는 브라우저입니다."),!1)}execute(e){let t=setTimeout(()=>{this.playBlinkSound()},"number"==typeof e.threshold&&e.threshold<1e3?1e3*e.threshold:e.threshold);return{stop:()=>{clearTimeout(t)}}}playBlinkSound(){if(!this.audioContext)return;let e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.type="sine",e.frequency.setValueAtTime(400,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(600,this.audioContext.currentTime+.1),t.gain.setValueAtTime(0,this.audioContext.currentTime),t.gain.linearRampToValueAtTime(.3,this.audioContext.currentTime+.05),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),e.connect(t),t.connect(this.audioContext.destination),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.3),setTimeout(()=>{if(!this.audioContext)return;let e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.type="sine",e.frequency.setValueAtTime(600,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(300,this.audioContext.currentTime+.08),t.gain.setValueAtTime(0,this.audioContext.currentTime),t.gain.linearRampToValueAtTime(.2,this.audioContext.currentTime+.04),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.25),e.connect(t),t.connect(this.audioContext.destination),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.25)},150)}constructor(e){this.options=e,this.audioContext=null;{let e=window.AudioContext||window.webkitAudioContext;e?this.audioContext=new e:this.audioContext=null}}}class E{create(e,t){let s=this.registry[e];if(!s)throw Error("Unknown shape");return new s(t)}constructor(){this.registry={PIP:B,Sound:T}}}let S=new Map;S.set(v.WarnFactory,new E);let F={get:e=>S.get(e)};class W{monitorStart(){new w(this.resolve).execute({type:"blink"})}monitorStop(){new k(this.resolve).execute({type:"blink"})}addWarnTool(e,t){let s=F.get(v.WarnFactory).create(e,t);new b(this.resolve).execute({type:"blink",toolType:e,warn:s})}deleteWarnTool(e){new j(this.resolve).execute({type:"blink",toolType:e})}setThreshold(e){new y(this.resolve).execute({type:"blink",threshold:e})}constructor(e){this.resolve=e}}class M{canUse(){return"undefined"!=typeof Worker&&!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}getCurrentValue(){return 0}async listen(e,t){this.listeners.set(e,t),this.isWorkerMode||await this.startWorkerMode()}async off(e){this.listeners.delete(e),0===this.listeners.size&&this.destructor()}async startWorkerMode(){if(this.isWorkerMode)return void console.warn("워커 모드가 이미 활성화되어 있습니다.");try{this.startVideoStream(),this.worker=await this.createWorker(),this.isWorkerMode=!0}catch(e){throw this.destructor(),e}}startVideoStream(){navigator.mediaDevices.getUserMedia({video:!0}).then(e=>{this.videoElement.srcObject=e,this.videoElement.play().then(()=>{}).catch(e=>{console.warn("비디오 재생 실패:",e)})})}async createWorker(){try{let e=new Worker(s.tu(new URL(s.p+s.u(381),s.b)),{type:void 0});return e.onmessage=e=>this.handleWorkerMessage(e),e.onerror=e=>{console.error("워커 에러:",e)},e.postMessage({type:"initialize",data:{modelPath:"/face_landmarker.task"}}),e}catch(e){throw console.error("워커 생성 실패:",e),e}}handleWorkerMessage(e){let{type:t,data:s}=e.data;switch(t){case"requestVideoFrame":this.sendingVideoFrame();break;case"eyeStatus":this.isBlink(s.status)&&this.notifyListeners("blink",this.lastBlinkTime);break;case"error":console.error("워커 오류:",s.message)}}sendingVideoFrame(){if(this.worker&&(this.canvas||this.initCanvas(),this.updateCanvasSize(),this.canvas&&this.ctx)){this.ctx.drawImage(this.videoElement,0,0);let e=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);this.worker.postMessage({type:"getEyeStatus",data:{videoData:e,timestamp:performance.now()}})}}initCanvas(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}updateCanvasSize(){this.canvas&&this.videoElement.videoWidth>0&&(this.canvas.width=this.videoElement.videoWidth,this.canvas.height=this.videoElement.videoHeight)}isBlink(e){let t=e>this.blinkLimitScore?"close":"open";if("open"===this.eyeStatus&&"close"===t)this.eyeStatus="close";else if("close"===this.eyeStatus&&"open"===t)return this.eyeStatus="open",this.lastBlinkTime=performance.now(),!0;return!1}destructor(){if(null!==this.animationFrameId&&(window.cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.videoElement){this.videoElement.pause();let e=this.videoElement.srcObject;e&&e.getTracks().forEach(e=>e.stop()),this.videoElement.srcObject=null}this.videoElement&&(this.videoElement.pause(),this.videoElement.srcObject=null),this.worker&&(this.worker.terminate(),this.worker=null),this.canvas&&(this.canvas.width=0,this.canvas.height=0,this.canvas=null,this.ctx=null),this.isWorkerMode=!1}notifyListeners(e,t){let s=this.listeners.get(e);s&&s(t)}constructor(e){this.videoElement=e,this.animationFrameId=null,this.listeners=new Map,this.worker=null,this.isWorkerMode=!1,this.canvas=null,this.ctx=null,this.eyeStatus="open",this.blinkLimitScore=.4,this.lastBlinkTime=0}}class N{present(e){var t,s,n;let i={isRunning:e.status?"ACTIVE"===e.status:this.prevVM.isRunning,lastBlinkAt:null!=(t=e.lastBlinkAt)?t:this.prevVM.lastBlinkAt,warningThreshold:null!=(s=e.threshold)?s:this.prevVM.warningThreshold,soundOn:e.warnTools?e.warnTools.includes("Sound"):this.prevVM.soundOn,pipOn:e.warnTools?e.warnTools.includes("PIP"):this.prevVM.pipOn,pipFlick:null!=(n=e.pipFlick)?n:this.prevVM.pipFlick};this.prevVM=i,this.onPresent(i)}constructor(e){this.onPresent=e,this.prevVM={isRunning:!1,lastBlinkAt:new Date,warningThreshold:5,soundOn:!1,pipOn:!1,pipFlick:!1}}}function _(){var e,t,s,u,p,m,g,w,k,b,y;let[j,B]=(0,i.useState)(null),T=(0,i.useRef)(null),[E,S]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!T.current)return;let e=function(e){var t,s,n,i,r,l,o,a,h,d,c,u,p,m,x,g,w,k,b;let y=new Map,j=[],B=e=>{let t=y.get(e);if(!t)throw Error("DI not found: ".concat(String(e)));if("function"==typeof t){let s=t();return y.set(e,s),s}return t},T={get:B},E=null!=(l=e.overrides)?l:{},S={presenter:()=>new N(e.setVM),sensor:()=>new M(e.videoEl),warn:()=>new C,warnTools:()=>new C,controller:e=>new W(e)},F=null!=(a=null!=(o=E.presenter)?o:null==(t=S.presenter)?void 0:t.call(S))?a:new N(e.setVM);y.set(v.Blink.Presenter,F);let _=null!=(d=null!=(h=E.sensor)?h:null==(s=S.sensor)?void 0:s.call(S))?d:new M(e.videoEl);y.set(v.Blink.Sensor,_);let D=null!=(c=E.repo)?c:new f;y.set(v.Blink.DB,D);let A=null!=(m=null!=(p=null!=(u=E.warn)?u:y.get(v.Blink.WarnTools))?p:null==(n=S.warn)?void 0:n.call(S))?m:new C;y.set(v.Blink.Warn,A);let I=null!=(w=null!=(g=null!=(x=E.warnTools)?x:y.get(v.Blink.Warn))?g:null==(i=S.warnTools)?void 0:i.call(S))?w:new C;y.set(v.Blink.WarnTools,I);let R=null!=(b=null!=(k=E.controller)?k:null==(r=S.controller)?void 0:r.call(S,T))?b:new W(T);for(let e of(y.set(v.Blink.Controller,R),y.values()))"function"==typeof(null==e?void 0:e.dispose)&&j.push(e);return{get:B,dispose(){for(let e=j.length-1;e>=0;e--)try{j[e].dispose()}catch(e){}y.clear()}}}({videoEl:T.current,setVM:B}),t=e.get(v.Blink.Controller);return S(t),()=>{t.monitorStop(),e.dispose()}},[]),(0,n.jsxs)("div",{className:"w-full max-w-md bg-white rounded-3xl shadow-2xl overflow-hidden",children:[(0,n.jsxs)("div",{className:"p-6 space-y-4",children:[(0,n.jsx)(a,{videoRef:T,isRunning:null!=(e=null==j?void 0:j.isRunning)&&e}),(0,n.jsx)(r,{lastBlinkAt:null!=(t=null==j?void 0:j.lastBlinkAt)?t:new Date,isRunning:null!=(s=null==j?void 0:j.isRunning)&&s}),(0,n.jsx)(d,{warningThreshold:null!=(u=null==j?void 0:j.warningThreshold)?u:5,onUpdateThreshold:e=>null==E?void 0:E.setThreshold(e)}),(0,n.jsx)(h,{isWarningEnabled:null!=(p=null==j?void 0:j.soundOn)&&p,onToggleWarning:()=>(null==j?void 0:j.soundOn)?null==E?void 0:E.deleteWarnTool("Sound"):null==E?void 0:E.addWarnTool("Sound",{volumn:50})}),(0,n.jsx)(c,{isWarningEnabled:null!=(m=null==j?void 0:j.pipOn)&&m,onToggleWarning:()=>(null==j?void 0:j.pipOn)?null==E?void 0:E.deleteWarnTool("PIP"):null==E?void 0:E.addWarnTool("PIP",{})}),(0,n.jsx)(l,{isRunning:null!=(g=null==j?void 0:j.isRunning)&&g})]}),(null==j?void 0:j.pipOn)&&(0,n.jsx)(x,{isRunning:null!=(w=null==j?void 0:j.isRunning)&&w,pipFlick:null!=(k=null==j?void 0:j.pipFlick)&&k,threshold:null!=(b=null==j?void 0:j.warningThreshold)?b:5}),(0,n.jsx)("div",{className:"px-6 pb-6",children:(0,n.jsx)(o,{isRunning:null!=(y=null==j?void 0:j.isRunning)&&y,onStart:()=>{E?E.monitorStart():alert("error")},onStop:()=>{E&&E.monitorStop()}})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[789,20,358],()=>t(309)),_N_E=e.O()}]);